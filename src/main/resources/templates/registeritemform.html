<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout :: layout(~{::title}, ~{::main})}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
<main class="container mx-auto px-4 max-w-5xl">
    <div>
        <div class="flex-container">
            <h1 class="mb-4 grid place-items-center block text-3xl font-semibold leading-6 text-gray-900">제품 등록</h1>
    <!--        action에 post 보낼 링크 설정, 빈 폼 확인 -->
            <form action="" method="post" name="itemInfo" onsubmit="handleOnsubmit()" enctype="multipart/form-data">
                <!-- form은 name까지 넣어야 입력이 들어감 -->
                <label class="mt-8 mb-4 grid place-items-center block text-lg font-semibold leading-6 text-gray-900" for="name">상품명</label>
                <input type="text" name="itemInfo.name" id="name" class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-lg sm:leading-6">
                <label class="mt-8 mb-4 grid place-items-center block text-lg font-semibold leading-6 text-gray-900" for="name">가격</label>
                <input type="number" name="itemInfo.price" id="price"  class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-lg sm:leading-6">

                <h3 class="mt-8 grid place-items-center block text-lg font-semibold leading-6 text-gray-900">카테고리</h3>
                <div>
                    <select name="itemInfo.category" id="category" class="mt-4 block w-full rounded-md border-0 px-3.5 py-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-lg sm:leading-6">
                        <option value="카테고리">카테고리</option>
                        <option value="핸드폰">핸드폰</option>
                        <option value="의류">의류</option>
                        <option value="반려동물">반려동물</option>
                        <option value="서적">서적</option>
                        <option value="기타">기타</option>
                    </select>
                </div>


                <!-- 비동기방식 업로드-->
                <div class="col-span-full">
                    <h3 class="mt-8 grid place-items-center block text-lg font-semibold leading-6 text-gray-900">상품 이미지</h3>
                    <div class="mt-4 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10">
                        <img src="https://i0.wp.com/adventure.co.kr/wp-content/uploads/2020/09/no-image.jpg" id="image-box" class="mx-auto h-96 w-96">
                    </div>
                </div>
                <div class="mt-4 grid place-items-center flex text-sm leading-6 text-gray-600">
                    <label for="itemImage" class="relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500">
                        <span>Upload a file</span>
                        <input id="itemImage" name="itemImage" type="file" accept="image/*" class="sr-only">
                    </label>
                    <!--                                <p class="pl-1">or drag and drop</p>-->
                </div>
                <p class="grid place-items-center text-xs leading-5 text-gray-600">PNG, JPG, GIF up to 5MB</p>
                   

                <!-- 동기방식 에러 -->
                <!-- <div class="wrapper">
                    <h2>URL API</h2>
                    <img src="https://i0.wp.com/adventure.co.kr/wp-content/uploads/2020/09/no-image.jpg" class="image-box" />
                    <label for="file2" class="upload-btn">
                        <input id="file2" type="file" accept="image/*" />
                        <span>Upload Image</span>
                    </label>
                </div> -->
                <h3 class="mt-8 grid place-items-center block text-lg font-semibold leading-6 text-gray-900" >상품 설명</h3>
                <textarea name="itemInfo.description" id="description" cols="30" rows="5" class="mt-4 block w-full text-lg font-semibold leading-6 text-gray-900"></textarea>
                <input type="submit" value="제품 등록" class="mt-4 block w-full rounded-md bg-indigo-600 px-3.5 py-2.5 text-center text-lg font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
            </form>
        
            
        </div>
    </div>
</main>
</body>
</html>


<script>
    function handleOnsubmit(){
        if (document.querySelector('#name').value == '') { // id 라는 id 를 선택하고 해당 input이 공백일 경우
            e.preventDefault() // 폼 전송을 막음
            alert('아이디를 입력해주세요') // '아이디를 입력해주세요' 라는 경고창을 띄움
        }
        if (document.querySelector('#password').value == '') { // password 라는 id 를 선택하고 해당 input이 공백일 경우
            e.preventDefault() // 폼 전송을 막음
            alert('비밀번호를 입력해주세요') // '비밀번호를 입력해주세요' 라는 경고창을 띄움
        }
        if (document.querySelector('#password').value.length < 6){ // password 라는 id 를 선택하고 해당 input이 6자 미만일 경우
            e.preventDefault() // 폼 전송을 막음
            alert('비밀번호를 6자 이상 입력해주세요')} // '비밀번호를 입력해주세요' 라는 경고창을 띄움
        if (document.querySelector('#category').value == '') { // id 라는 id 를 선택하고 해당 input이 공백일 경우
            e.preventDefault() // 폼 전송을 막음
            alert('아이디를 입력해주세요') // '아이디를 입력해주세요' 라는 경고창을 띄움
        }
        if (previews[0].src === "https://i0.wp.com/adventure.co.kr/wp-content/uploads/2020/09/no-image.jpg"){
            e.preventDefault() // 폼 전송을 막음
            alert('상품 이미지를 등록해주세요')/// 상품 이미지를 등록해주세요' 라는 경고창을 띄움
        }
    }
    const fileDOM = document.querySelector('#itemImage');
    const preview = document.querySelector('#image-box');

    fileDOM.addEventListener('change', () => {
        const reader = new FileReader();
        reader.onload = ({ target }) => {
<!--            const imgElement = document.createElement("img");-->
<!--            imgElement.src = target.result;-->
<!--            preview.appendChild(imgElement);-->
            preview.src = target.result;
            alert("이미지 업로드");
        };
        reader.readAsDataURL(fileDOM.files[0]);
    });

</script>