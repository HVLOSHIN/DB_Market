<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
    .flex-container {
        /* display: flex;
        flex-direction: column; */
    }

    .wrapper {
        text-align: left;
        flex-grow: 1;
        
        .image-box {
            width: 200px;
            height: 200px;
            object-fit: cover;
            display:inline-flex;
            margin: 20px auto;
        }

        .upload-btn {
            border: 1px solid #ddd;
            padding: 6px 12px;
            display: inline-block;
            cursor: pointer;

            input[type=file] {
            display: none;
            }
        }
    }
</style>

<body>
<div>
    <div class="flex-container">
        <h1>제품 등록</h1>
<!--        action에 post 보낼 링크 설정, 빈 폼 확인 -->
        <form action="" method="post" id="postform" onsubmit="handleOnsubmit()" enctype="multipart/form-data">
            <!-- form은 name까지 넣어야 입력이 들어감 -->
            상품명 : <input type="text" name="name" id="name"><br>
            가격 : <input type="number" name="price" id="price"><br>
        
            <br>
            <h3>카테고리</h3>
            <select name="category" id="category">
                <option value="카테고리">카테고리</option>
                <option value="핸드폰">핸드폰</option>
                <option value="카메라">카메라</option>
                <option value="키보드">키보드</option>
            </select>

            <!-- 비동기방식 -->
            <div class="wrapper">
                    <h3>상품 이미지</h3>
                    <img src="https://i0.wp.com/adventure.co.kr/wp-content/uploads/2020/09/no-image.jpg" class="image-box"/><br>
                    <label for="imgFile" class="upload-btn">
                        <input id="imgFile" type="file" accept="image/*" name="imgFile" />
                        <span>Upload Image</span>
                    </label>
            </div><br>
            <!-- 동기방식 에러 -->
            <!-- <div class="wrapper">
                <h2>URL API</h2>
                <img src="https://i0.wp.com/adventure.co.kr/wp-content/uploads/2020/09/no-image.jpg" class="image-box" />
                <label for="file2" class="upload-btn">
                    <input id="file2" type="file" accept="image/*" />
                    <span>Upload Image</span>
                </label>
            </div> -->
            <h3>상품 설명</h3>
            <textarea name="description" id="description" cols="30" rows="5"></textarea><br>
            <input type="submit" value="제품 등록">
        </form>
       
        
    </div>
</div>

</body>
</html>


<script>
    function handleOnsubmit(){
        if (document.querySelector('#name').value == '') { // id 라는 id 를 선택하고 해당 input이 공백일 경우
            e.preventDefault() // 폼 전송을 막음
            alert('아이디를 입력해주세요') // '아이디를 입력해주세요' 라는 경고창을 띄움
        }
        if (document.querySelector('#password').value == '') { // password 라는 id 를 선택하고 해당 input이 공백일 경우
            e.preventDefault() // 폼 전송을 막음
            alert('비밀번호를 입력해주세요') // '비밀번호를 입력해주세요' 라는 경고창을 띄움
        }
        if (document.querySelector('#password').value.length < 6){ // password 라는 id 를 선택하고 해당 input이 6자 미만일 경우
            e.preventDefault() // 폼 전송을 막음
            alert('비밀번호를 6자 이상 입력해주세요')} // '비밀번호를 입력해주세요' 라는 경고창을 띄움
        if (document.querySelector('#category').value == '') { // id 라는 id 를 선택하고 해당 input이 공백일 경우
            e.preventDefault() // 폼 전송을 막음
            alert('아이디를 입력해주세요') // '아이디를 입력해주세요' 라는 경고창을 띄움
        }
        if (previews[0].src === "https://i0.wp.com/adventure.co.kr/wp-content/uploads/2020/09/no-image.jpg"){
            e.preventDefault() // 폼 전송을 막음
            alert('상품 이미지를 등록해주세요')/// 상품 이미지를 등록해주세요' 라는 경고창을 띄움
        }
    }
    const fileDOM = document.querySelector('#imgFile');
    const previews = document.querySelectorAll('.image-box');

    fileDOM.addEventListener('change', () => {
        const reader = new FileReader();
        reader.onload = ({ target }) => {
            previews[0].src = target.result;
        };
        reader.readAsDataURL(fileDOM.files[0]);
    });

</script>